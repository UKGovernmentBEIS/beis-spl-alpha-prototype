{% extends "layout.html" %}

{% from "button/macro.njk" import govukButton %}

{% block pageTitle %}
  Help your employees plan their leave and pay
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: 'Back',
    href: 'type-of-leave' if data['leave-type'] == 'shared' else 'multiple-blocks-of-leave'
  }) }}
{% endblock %}

{% macro payBlockInput(options) %}
  {% call govukFieldset({
    legend: {
      text: "What weeks are paid/unpaid?",
      classes: "govuk-fieldset__legend--m"
    }
  }) %}
    <div class="salary-group">
      {{ govukInput({
        label: {
          text: "Number of weeks"
        },
        classes: "govuk-input--width-2",
        id: '[leave-blocks][' + options.blockNumber + ']' + '[weeks]',
        name: '[leave-blocks][' + options.blockNumber + ']' + '[weeks]',
        value: options.weeks
      }) }}
      {{ govukInput({
        label: {
          text: "% of salary"
        },
        classes: "govuk-input--width-3",
        id: '[leave-blocks][' + options.blockNumber + ']' + '[percent-of-salary]',
        name: '[leave-blocks][' + options.blockNumber + ']' + '[percent-of-salary]',
        value: options.percentOfSalary
      }) }}
    </div>
  {% endcall %}
{% endmacro %}


{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <h1 class="govuk-heading-xl">
        Help your employees plan their leave and pay
      </h1>
      <form method="POST">
        {% for leaveBlock in data['leave-blocks'] %}
          {{ payBlockInput({
            blockNumber: loop.index0,
            weeks: leaveBlock['weeks'],
            percentOfSalary: leaveBlock['percent-of-salary']
          }) }}
        {% endfor %}

        {{ govukButton({
          classes: 'hmcts-button--secondary',
          text: 'Add another block',
          attributes: {
            formaction: "which-weeks-are-paid/add-another"
          }
        }) }}

        <br/>

        <button type="submit" formaction="which-weeks-are-paid" class="govuk-button">
          Continue
        </button>
      </form>
    </div>
  </div>
{% endblock %}